#!/bin/bash
# Squire Library Publishing Utility
#
# Copies the files for the specified library to the appropriate directories
# Usage: ./publish [libname|all [update]]

if [ -z "$1" ]; then 
	echo usage: "$0 [libname|all [update]]"
	exit
fi

lib=$1


# Twitter bootstrap
if [ "$lib" == "bootstrap" ] || [ "$lib" == "all" ]; then
	cd twitter/bootstrap

	# Pull from github?
	if [ "$2" == "update" ]; then
		echo "Pulling latest Bootstrap from remote repository"
		git pull > /dev/null
	fi

	# Publish assets
	cp -R less/* ../../../public/bootstrap/less/
	cp -R js/* ../../../public/bootstrap/js/
	cp -R img/* ../../../public/bootstrap/img/

	cd ../..
	
	echo "Published Twitter Bootstrap assets to public/bootstrap."
fi


# jQuery
if [ "$lib" == "jquery" ] || [ "$lib" == "all" ]; then
	cd jquery/jquery

	# Pull from github?
	if [ "$2" == "update" ]; then
		echo "Pulling latest jQuery from remote repository"
		git pull > /dev/null
	fi

	echo "Building jQuery..."
	make > /dev/null
	cp dist/jquery.min.js ../../../public/js/
	
	cd ../..

	echo "Published jQuery to public/js."
fi


# jQuery UI
if [ "$lib" == "jquery-ui" ] || [ "$lib" == "jqueryui" ] || [ "$lib" == "all" ]; then
	cd jquery/jquery-ui

	# Pull from github?
	if [ "$2" == "update" ]; then 
		echo "Pulling latest jQuery UI from remote repository"
		git pull > /dev/null
	fi

	echo "Building jQuery UI..."
	cd build
	ant > /dev/null
	cp dist/jquery-ui.min.js ../../../../public/js/
	cp -R dist/theme ../../../../public/css/jquery-ui
	
	cd ../../..

	echo "Published jQuery UI to public/js and public/css/jquery-ui."
fi


